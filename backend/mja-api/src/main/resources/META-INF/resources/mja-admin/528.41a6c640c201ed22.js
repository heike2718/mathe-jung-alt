"use strict";(self.webpackChunkmja_admin=self.webpackChunkmja_admin||[]).push([[528],{6528:(Zn,De,l)=>{l.r(De),l.d(De,{raetselgruppenRoutes:()=>Tn});var le=l(9777),r=l(655),e=l(4650),C=l(6895),pe=l(9814),g=l(7155),b=l(4859),ve=l(8739),oe=l(6308),ye=l(7392),o=l(9653);const p=(0,o.R7)({source:"raetselgruppen",events:{FIND_RAETSELGRUPPEN:(0,o.Ky)(),RAETSELGRUPPEN_FOUND:(0,o.Ky)(),RAETSELGRUPPEN_SELECT_PAGE:(0,o.Ky)(),SELECT_RAETSELGRUPPE:(0,o.Ky)(),UNSELECT_RAETSELGRUPPE:(0,o.uZ)(),RAETSELGRUPPEDETAILS_LOADED:(0,o.Ky)(),GENERIERE_VORSCHAU:(0,o.Ky)(),FILE_GENERATED:(0,o.Ky)(),GENERIERE_LATEX:(0,o.Ky)(),EDIT_RAETSELGUPPE:(0,o.Ky)(),SAVE_RAETSELGRUPPE:(0,o.Ky)(),RAETSELGRUPPE_SAVED:(0,o.Ky)(),SAVE_RAETSELGRUPPENELEMENT:(0,o.Ky)(),DELETE_RAETSELGRUPPENELEMENT:(0,o.Ky)(),RAETSELGRUPPENELEMENTE_CHANGED:(0,o.Ky)()}});var f=l(4614);const ke=(0,o.Tz)({name:"raetselgruppen",reducer:(0,o.Lq)({loaded:!1,anzahlTrefferGesamt:0,page:[],paginationState:f.n$,raetselgruppeBasisdaten:void 0,raetselgruppeDetails:void 0},(0,o.on)(p.raetselgruppen_found,(n,t)=>({...n,paginationState:{...n.paginationState,anzahlTreffer:t.treffer.trefferGesamt},page:t.treffer.items,loaded:!0})),(0,o.on)(p.raetselgruppen_select_page,(n,t)=>({...n,paginationState:{...n.paginationState,pageDefinition:{pageIndex:t.pageDefinition.pageIndex,pageSize:t.pageDefinition.pageSize,sortDirection:t.pageDefinition.sortDirection}}})),(0,o.on)(p.edit_raetselguppe,(n,t)=>({...n,raetselgruppeBasisdaten:t.raetselgruppeBasisdaten})),(0,o.on)(p.raetselgruppe_saved,(n,t)=>({...n,raetselgruppeBasisdaten:t.raetselgruppe})),(0,o.on)(p.raetselgruppedetails_loaded,(n,t)=>({...n,raetselgruppeDetails:t.raetselgruppeDetails,raetselgruppeBasisdaten:void 0})),(0,o.on)(p.unselect_raetselgruppe,(n,t)=>({...n,raetselgruppeDetails:void 0,raetselgruppeBasisdaten:void 0})),(0,o.on)(p.raetselgruppenelemente_changed,(n,t)=>({...n,raetselgruppeDetails:t.raetselgruppenDetails})))}),{selectRaetselgruppenState:O}=ke,at=(0,o.P1)(O,n=>n.loaded),rt=(0,o.P1)(O,n=>n.anzahlTrefferGesamt),st=(0,o.P1)(O,n=>n.page),it=(0,o.P1)(O,n=>n.paginationState),Ne=(0,o.P1)(O,n=>n.raetselgruppeDetails),U={isLoaded:at,anzahlTrefferGesamt:rt,page:st,paginationState:it,raetselgruppeBasisdaten:(0,o.P1)(O,n=>n.raetselgruppeBasisdaten),raetselgruppeDetails:Ne,raetselgruppenelemente:(0,o.P1)(Ne,n=>n?n.elemente:[])};var Ue=l(6582),ot=l(6759),m=l(2655),I=l(4351),z=l(4004),Z=l(8505),x=l(529);const ut={id:"neu",name:"",status:"ERFASST",kommentar:void 0,schwierigkeitsgrad:"NOOP",referenztyp:"NOOP",referenz:void 0,geaendertDurch:void 0},j={name:null,schwierigkeitsgrad:null,referenztyp:null,referenz:null,sortAttribute:"name"};var q,E,A,Ie,ze,Me,Fe,v,D,V,Te;class Y{constructor(){q.add(this),E.set(this,(0,e.f3M)(x.eN)),A.set(this,"/raetselgruppen")}findRaetselgruppen(t,a){const s=a.pageIndex*a.pageSize;let i=(new x.LE).set(f.jb,a.pageSize).set(f.wE,s).set(f.wQ,a.sortDirection).set(f.HK,t.sortAttribute);t.name&&t.name.trim().length>0&&(i=i.set("name",t.name.trim())),t.schwierigkeitsgrad&&(i=i.set("schwierigkeitsgrad",t.schwierigkeitsgrad)),t.referenztyp&&(i=i.set("referenztyp",t.referenztyp)),t.referenz&&t.referenz.trim().length>0&&(i=i.set("referenz",t.referenz.trim()));const h=(0,r.Q_)(this,A,"f")+"/v1",y=(new x.WM).set("Accept","application/json");return(0,r.Q_)(this,E,"f").get(h,{headers:y,params:i})}findById(t){const a=(new x.WM).set("Accept","application/json"),s=(0,r.Q_)(this,A,"f")+"/v1/"+t;return(0,r.Q_)(this,E,"f").get(s,{headers:a})}saveRaetselgruppe(t){const a=(0,r.Q_)(this,A,"f")+"/v1";return"neu"===t.id?(0,r.Q_)(this,q,"m",Ie).call(this,a,t):(0,r.Q_)(this,q,"m",ze).call(this,a,t)}saveRaetselgruppenelement(t,a){const s=(0,r.Q_)(this,A,"f")+"/v1/"+t+"/elemente";return"neu"===a.id?(0,r.Q_)(this,q,"m",Me).call(this,s,a):(0,r.Q_)(this,q,"m",Fe).call(this,s,a)}deleteRaetselgruppenelement(t,a){const s=(0,r.Q_)(this,A,"f")+"/v1/"+t+"/elemente/"+a.id,i=(new x.WM).set("Accept","application/json");return(0,r.Q_)(this,E,"f").delete(s,{headers:i})}generiereVorschau(t,a){const s=(0,r.Q_)(this,A,"f")+"/v1/vorschau/"+t,i=(new x.WM).set("Accept","application/json"),h=(new x.LE).set("layoutAntwortvorschlaege",a);return(0,r.Q_)(this,E,"f").get(s,{headers:i,params:h})}generiereLaTeX(t){const a=(0,r.Q_)(this,A,"f")+"/v1/latex/"+t,s=(new x.WM).set("Accept","application/json"),i=(new x.LE).set("layoutAntwortvorschlaege","ANKREUZTABELLE");return(0,r.Q_)(this,E,"f").get(a,{headers:s,params:i})}}E=new WeakMap,A=new WeakMap,q=new WeakSet,Ie=function(t,a){const s=(new x.WM).set("Accept","application/json");return(0,r.Q_)(this,E,"f").post(t,a,{headers:s})},ze=function(t,a){const s=(new x.WM).set("Accept","application/json");return(0,r.Q_)(this,E,"f").put(t,a,{headers:s})},Me=function(t,a){const s=(new x.WM).set("Accept","application/json");return(0,r.Q_)(this,E,"f").post(t,a,{headers:s})},Fe=function(t,a){const s=(new x.WM).set("Accept","application/json");return(0,r.Q_)(this,E,"f").put(t,a,{headers:s})},Y.\u0275fac=function(t){return new(t||Y)},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"});class P{constructor(){v.set(this,(0,e.f3M)(m.eX)),D.set(this,(0,e.f3M)(Y)),V.set(this,(0,e.f3M)(Ue.F0)),Te.set(this,(0,e.f3M)(ot._b)),this.findRaetselgruppen$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.find_raetselgruppen),(0,I.b)(t=>(0,r.Q_)(this,D,"f").findRaetselgruppen(t.raetselgruppenSuchparameter,t.pageDefinition)),(0,z.U)(t=>p.raetselgruppen_found({treffer:t})))),this.selectRaetselgruppe$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.select_raetselgruppe),(0,I.b)(t=>(0,r.Q_)(this,D,"f").findById(t.raetselgruppe.id)),(0,z.U)(t=>p.raetselgruppedetails_loaded({raetselgruppeDetails:t,navigateTo:"raetselgruppen/details"})))),this.showDetails$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.raetselgruppedetails_loaded),(0,Z.b)(t=>{(0,r.Q_)(this,V,"f").navigateByUrl(t.navigateTo)})),{dispatch:!1}),this.unselectRaetselgruppe$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.unselect_raetselgruppe),(0,Z.b)(()=>{(0,r.Q_)(this,V,"f").navigateByUrl("raetselgruppen")})),{dispatch:!1}),this.editRaetselgruppe$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.edit_raetselguppe),(0,Z.b)(()=>{(0,r.Q_)(this,V,"f").navigateByUrl("raetselgruppen/edit")})),{dispatch:!1}),this.saveRaetselgruppe$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.save_raetselgruppe),(0,I.b)(t=>(0,r.Q_)(this,D,"f").saveRaetselgruppe(t.editRaetselgruppePayload)),(0,z.U)(t=>p.raetselgruppe_saved({raetselgruppe:t})))),this.saveRaetselgruppenelement$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.save_raetselgruppenelement),(0,I.b)(t=>(0,r.Q_)(this,D,"f").saveRaetselgruppenelement(t.raetselgruppeID,t.payload)),(0,z.U)(t=>p.raetselgruppenelemente_changed({raetselgruppenDetails:t})))),this.deleteRaetselgruppenelement$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.delete_raetselgruppenelement),(0,I.b)(t=>(0,r.Q_)(this,D,"f").deleteRaetselgruppenelement(t.raetselgruppeID,t.payload)),(0,z.U)(t=>p.raetselgruppenelemente_changed({raetselgruppenDetails:t})))),this.generiereVorschau$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.generiere_vorschau),(0,I.b)(t=>(0,r.Q_)(this,D,"f").generiereVorschau(t.raetselgruppeID,t.layoutAntwortvorschlaege)),(0,z.U)(t=>p.file_generated({pdf:t})))),this.generiereLaTeX$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.generiere_latex),(0,I.b)(t=>(0,r.Q_)(this,D,"f").generiereLaTeX(t.raetselgruppeID)),(0,z.U)(t=>p.file_generated({pdf:t})))),this.downloadPDF$=(0,m.GW)(()=>(0,r.Q_)(this,v,"f").pipe((0,m.l4)(p.file_generated),(0,Z.b)(t=>(0,r.Q_)(this,Te,"f").downloadPdf(t.pdf.fileData,t.pdf.fileName))),{dispatch:!1})}}v=new WeakMap,D=new WeakMap,V=new WeakMap,Te=new WeakMap,P.\u0275fac=function(t){return new(t||P)},P.\u0275prov=e.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"});var _,Ze,H=l(7694);class w{constructor(){_.set(this,(0,e.f3M)(o.yh)),this.page$=(0,r.Q_)(this,_,"f").select(U.page),this.anzahlTrefferGesamt$=(0,r.Q_)(this,_,"f").select(U.anzahlTrefferGesamt),this.paginationState$=(0,r.Q_)(this,_,"f").select(U.paginationState),this.editorContent$=(0,r.Q_)(this,_,"f").select(U.raetselgruppeBasisdaten).pipe(H.d0,H.I8),this.raetselgruppeDetails$=(0,r.Q_)(this,_,"f").select(U.raetselgruppeDetails).pipe(H.d0,H.I8),this.raetselgruppeBasisdaten$=(0,r.Q_)(this,_,"f").select(U.raetselgruppeBasisdaten).pipe(H.d0,H.I8),this.raetselgruppenelemente$=(0,r.Q_)(this,_,"f").select(U.raetselgruppenelemente)}triggerSearch(t,a){(0,r.Q_)(this,_,"f").dispatch(p.raetselgruppen_select_page({pageDefinition:a})),(0,r.Q_)(this,_,"f").dispatch(p.find_raetselgruppen({raetselgruppenSuchparameter:t,pageDefinition:a}))}selectRaetselgruppe(t){(0,r.Q_)(this,_,"f").dispatch(p.select_raetselgruppe({raetselgruppe:t}))}unselectRaetselgruppe(){(0,r.Q_)(this,_,"f").dispatch(p.unselect_raetselgruppe())}generiereVorschau(t,a){(0,r.Q_)(this,_,"f").dispatch(p.generiere_vorschau({raetselgruppeID:t,layoutAntwortvorschlaege:a}))}generiereLaTeX(t){(0,r.Q_)(this,_,"f").dispatch(p.generiere_latex({raetselgruppeID:t}))}createAndEditRaetselgruppe(){this.editRaetselgruppe(ut)}editRaetselgruppe(t){(0,r.Q_)(this,_,"f").dispatch(p.edit_raetselguppe({raetselgruppeBasisdaten:t}))}saveRaetselgruppe(t){(0,r.Q_)(this,_,"f").dispatch(p.save_raetselgruppe({editRaetselgruppePayload:t}))}cancelEdit(t){if("neu"===t.id)(0,r.Q_)(this,_,"f").dispatch(p.unselect_raetselgruppe());else{const a={id:t.id,name:"",schwierigkeitsgrad:t.schwierigkeitsgrad,status:t.status,referenztyp:t.referenztyp,referenz:t.referenz,geaendertDurch:t.geaendertDurch,anzahlElemente:0};(0,r.Q_)(this,_,"f").dispatch(p.select_raetselgruppe({raetselgruppe:a}))}}saveRaetselgruppenelement(t,a){(0,r.Q_)(this,_,"f").dispatch(p.save_raetselgruppenelement({raetselgruppeID:t,payload:a}))}deleteRaetselgruppenelement(t,a){(0,r.Q_)(this,_,"f").dispatch(p.delete_raetselgruppenelement({raetselgruppeID:t,payload:a}))}}_=new WeakMap,w.\u0275fac=function(t){return new(t||w)},w.\u0275prov=e.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"});class G{constructor(){Ze.set(this,(0,e.f3M)(w))}connect(t){return(0,r.Q_)(this,Ze,"f").page$}disconnect(t){}}Ze=new WeakMap,G.\u0275fac=function(t){return new(t||G)},G.\u0275prov=e.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"});const Le=[(0,o.oY)(ke),(0,m.y3)([P])];var Q,J,ue,ce,me,ge,fe,_e,de,c,K,X,W,ee,he,He,k,S=l(727),Oe=l(6451),qe=l(8372),Ye=l(1884),M=l(284),T=l(9549),u=l(4006),Pe=l(4385),R=l(1576),mt=l(3238);function gt(n,t){1&n&&e._UZ(0,"mat-header-cell",18)}function ft(n,t){1&n&&(e.TgZ(0,"span")(1,"mat-icon"),e._uU(2,"block"),e.qZA()())}function _t(n,t){1&n&&(e.TgZ(0,"span")(1,"mat-icon"),e._uU(2,"check_circle_outline"),e.qZA()())}function dt(n,t){if(1&n&&(e.TgZ(0,"mat-cell",19),e.YNc(1,ft,3,0,"span",20),e.YNc(2,_t,3,0,"span",20),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Q6J("ngIf","ERFASST"===a.status),e.xp6(1),e.Q6J("ngIf","FREIGEGEBEN"===a.status)}}function ht(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return e.KtG(i.clearFilter(i.nameFilterControl))}),e.TgZ(1,"mat-icon"),e._uU(2," close "),e.qZA()()}}function Rt(n,t){if(1&n&&(e.TgZ(0,"mat-header-cell")(1,"div",21)(2,"label",22),e._uU(3," Name "),e.qZA(),e.TgZ(4,"mat-form-field",23),e._UZ(5,"input",24,25),e.YNc(7,ht,3,0,"button",26),e.qZA()()()),2&n){const a=e.MAs(6),s=e.oxw();e.xp6(5),e.Q6J("formControl",s.nameFilterControl),e.xp6(2),e.Q6J("ngIf",a.value)}}function Ct(n,t){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.AsE(" ",a.name," (",a.anzahlElemente,") ")}}function xt(n,t){if(1&n&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a.label," ")}}function vt(n,t){if(1&n&&(e.TgZ(0,"mat-header-cell")(1,"div",21)(2,"label"),e._uU(3," Level "),e.qZA(),e.TgZ(4,"mat-form-field",23)(5,"mat-select",28),e.YNc(6,xt,2,2,"mat-option",29),e.qZA()()()()),2&n){const a=e.oxw();e.xp6(5),e.Q6J("formControl",a.schwierigkeitsgradSelectFilterControl),e.xp6(1),e.Q6J("ngForOf",a.schwierigkeitsgrade)}}function Tt(n,t){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.hij(" ",a.schwierigkeitsgrad," ")}}function Zt(n,t){if(1&n&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a.label," ")}}function Et(n,t){if(1&n&&(e.TgZ(0,"mat-header-cell")(1,"div",21)(2,"label",22),e._uU(3," Referenztyp "),e.qZA(),e.TgZ(4,"mat-form-field",23)(5,"mat-select",28),e.YNc(6,Zt,2,2,"mat-option",29),e.qZA()()()()),2&n){const a=e.oxw();e.xp6(5),e.Q6J("formControl",a.referenztypSelectFilterControl),e.xp6(1),e.Q6J("ngForOf",a.referenztypen)}}function bt(n,t){if(1&n&&(e.TgZ(0,"mat-cell",31),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.hij(" ",a.referenztyp," ")}}function wt(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return e.KtG(i.clearFilter(i.referenzFilterControl))}),e.TgZ(1,"mat-icon"),e._uU(2," close "),e.qZA()()}}function St(n,t){if(1&n&&(e.TgZ(0,"mat-header-cell")(1,"div",21)(2,"label",22),e._uU(3," Referenz "),e.qZA(),e.TgZ(4,"mat-form-field",23),e._UZ(5,"input",24,32),e.YNc(7,wt,3,0,"button",26),e.qZA()()()),2&n){const a=e.MAs(6),s=e.oxw();e.xp6(5),e.Q6J("formControl",s.referenzFilterControl),e.xp6(2),e.Q6J("ngIf",a.value)}}function Qt(n,t){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.hij(" ",a.referenz," ")}}function At(n,t){1&n&&e._UZ(0,"mat-header-row")}function Dt(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"mat-row",33),e.NdJ("click",function(){const h=e.CHM(a).$implicit,y=e.oxw();return e.KtG(y.onRowClicked(h))}),e.qZA()}}const yt=function(){return[20,30,50]};class B{constructor(t){this.changeDetector=t,Q.add(this),this.dataSource=(0,e.f3M)(G),this.anzahlRaetselgruppen=0,this.suchparameterStr="",this.schwierigkeitsgrade=(new f.W9).toGuiArray(),this.referenztypen=(new f.s$).toGuiArray(),this.filterValues={name:"",schwierigkeitsgrad:"",referenztyp:"",referenz:""},this.nameFilterControl=new u.NI(""),this.referenzFilterControl=new u.NI(""),this.schwierigkeitsgradSelectFilterControl=new u.NI,this.referenztypSelectFilterControl=new u.NI,J.set(this,(0,e.f3M)(w)),ue.set(this,new S.w0),ce.set(this,new S.w0),me.set(this,new S.w0),ge.set(this,new S.w0),fe.set(this,new S.w0),_e.set(this,new S.w0),de.set(this,new S.w0),c.set(this,j),K.set(this,f.n$),X.set(this,0),W.set(this,"asc"),ee.set(this,!1),he.set(this,window.innerWidth),this.schwierigkeitsgradSelectFilterControl.setValue(f.$h),this.referenztypSelectFilterControl.setValue(f.cw)}getScreenSize(){(0,r.YH)(this,he,window.innerWidth,"f")}ngOnInit(){(0,r.YH)(this,de,(0,r.Q_)(this,J,"f").paginationState$.subscribe(t=>{this.anzahlRaetselgruppen=t.anzahlTreffer,(0,r.YH)(this,X,t.pageDefinition.pageIndex,"f"),(0,r.YH)(this,W,"asc"===t.pageDefinition.sortDirection?"asc":"desc","f")}),"f"),(0,r.Q_)(this,Q,"m",k).call(this)}ngAfterViewInit(){setTimeout(()=>{},0),(0,r.Q_)(this,Q,"m",He).call(this),(0,r.YH)(this,_e,(0,Oe.T)(this.sort.sortChange,this.paginator.page).pipe((0,Z.b)(()=>{(0,r.Q_)(this,Q,"m",k).call(this)})).subscribe(),"f"),(0,Oe.T)(this.sort.sortChange,this.paginator.page).pipe((0,Z.b)(()=>{(0,r.YH)(this,K,{...(0,r.Q_)(this,K,"f"),pageDefinition:{...(0,r.Q_)(this,K,"f").pageDefinition,sortDirection:(0,r.Q_)(this,W,"f")}},"f"),(0,r.Q_)(this,Q,"m",k).call(this)})).subscribe(),(0,r.YH)(this,ue,this.nameFilterControl.valueChanges.pipe((0,qe.b)(500),(0,Ye.x)(),(0,Z.b)(t=>{t&&t.trim().length>0?(0,r.YH)(this,c,{...(0,r.Q_)(this,c,"f"),name:t},"f"):(0,r.YH)(this,c,{...(0,r.Q_)(this,c,"f"),name:null},"f"),this.paginator.pageIndex=0,this.suchparameterStr=JSON.stringify((0,r.Q_)(this,c,"f")),(0,r.Q_)(this,Q,"m",k).call(this)})).subscribe(),"f"),(0,r.YH)(this,ce,this.schwierigkeitsgradSelectFilterControl.valueChanges.pipe((0,Z.b)(t=>{(0,r.YH)(this,c,"NOOP"!==t.id?{...(0,r.Q_)(this,c,"f"),schwierigkeitsgrad:t.id}:{...(0,r.Q_)(this,c,"f"),schwierigkeitsgrad:null},"f"),this.paginator.pageIndex=0,this.suchparameterStr=JSON.stringify((0,r.Q_)(this,c,"f")),(0,r.Q_)(this,Q,"m",k).call(this)})).subscribe(),"f"),(0,r.YH)(this,me,this.referenztypSelectFilterControl.valueChanges.pipe((0,Z.b)(t=>{(0,r.YH)(this,c,"NOOP"!==t.id?{...(0,r.Q_)(this,c,"f"),referenztyp:t.id}:{...(0,r.Q_)(this,c,"f"),referenztyp:null},"f"),this.paginator.pageIndex=0,this.suchparameterStr=JSON.stringify((0,r.Q_)(this,c,"f")),(0,r.Q_)(this,Q,"m",k).call(this)})).subscribe(),"f"),(0,r.YH)(this,ge,this.referenzFilterControl.valueChanges.pipe((0,qe.b)(500),(0,Ye.x)(),(0,Z.b)(t=>{t&&t.trim().length>0?(0,r.YH)(this,c,{...(0,r.Q_)(this,c,"f"),referenz:t},"f"):(0,r.YH)(this,c,{...(0,r.Q_)(this,c,"f"),referenz:null},"f"),this.paginator.pageIndex=0,this.suchparameterStr=JSON.stringify((0,r.Q_)(this,c,"f")),(0,r.Q_)(this,Q,"m",k).call(this)})).subscribe(),"f"),this.changeDetector.detectChanges()}ngOnDestroy(){(0,r.Q_)(this,ue,"f").unsubscribe(),(0,r.Q_)(this,ce,"f").unsubscribe(),(0,r.Q_)(this,me,"f").unsubscribe(),(0,r.Q_)(this,ge,"f").unsubscribe(),(0,r.Q_)(this,de,"f").unsubscribe(),(0,r.Q_)(this,_e,"f").unsubscribe(),(0,r.Q_)(this,fe,"f").unsubscribe()}getDisplayedColumns(){return(0,r.Q_)(this,he,"f")>959?["status","name","schwierigkeitsgrad","referenztyp","referenz"]:["status","name"]}buttonResetAllFiltersDisabled(){return!!function ct(n){return!(n.name!==j.name||n.referenz!==j.referenz||n.referenztyp!==j.referenztyp||n.schwierigkeitsgrad!==j.schwierigkeitsgrad)}((0,r.Q_)(this,c,"f"))||void 0===this.paginator}neueRaetselgruppe(){(0,r.Q_)(this,J,"f").createAndEditRaetselgruppe()}onRowClicked(t){(0,r.Q_)(this,J,"f").selectRaetselgruppe(t)}clearFilter(t){t.patchValue("")}resetAllFilters(){(0,r.YH)(this,ee,!0,"f"),this.nameFilterControl.patchValue(""),this.referenzFilterControl.patchValue(""),this.schwierigkeitsgradSelectFilterControl.patchValue("NOOP"),(0,r.YH)(this,ee,!1,"f"),this.referenztypSelectFilterControl.patchValue("NOOP")}}J=new WeakMap,ue=new WeakMap,ce=new WeakMap,me=new WeakMap,ge=new WeakMap,fe=new WeakMap,_e=new WeakMap,de=new WeakMap,c=new WeakMap,K=new WeakMap,X=new WeakMap,W=new WeakMap,ee=new WeakMap,he=new WeakMap,Q=new WeakSet,He=function(){this.paginator.pageIndex=(0,r.Q_)(this,X,"f"),this.sort.direction=(0,r.Q_)(this,W,"f"),(0,r.YH)(this,fe,this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),"f")},k=function(){if((0,r.Q_)(this,ee,"f"))return;const t={pageIndex:this.paginator?this.paginator.pageIndex:(0,r.Q_)(this,X,"f"),pageSize:this.paginator?this.paginator.pageSize:20,sortDirection:this.sort?this.sort.direction:(0,r.Q_)(this,W,"f")};(0,r.Q_)(this,J,"f").triggerSearch((0,r.Q_)(this,c,"f"),t)},B.\u0275fac=function(t){return new(t||B)(e.Y36(e.sBO))},B.\u0275cmp=e.Xpm({type:B,selectors:[["mja-raetselgruppen-search"]],viewQuery:function(t,a){if(1&t&&(e.Gf(ve.NW,5),e.Gf(oe.YE,5)),2&t){let s;e.iGM(s=e.CRH())&&(a.paginator=s.first),e.iGM(s=e.CRH())&&(a.sort=s.first)}},hostBindings:function(t,a){1&t&&e.NdJ("resize",function(i){return a.getScreenSize(i)},!1,e.Jf7)},standalone:!0,features:[e.jDz],decls:31,vars:9,consts:[["flex","","fxLayout","row","fxLayoutGap","10px","fxLayout.lt-sm","column",1,"mb-2"],["fxLayoutAlign","left center","fxFlex","10"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","primary",3,"click"],["showFirstLastButtons","",3,"length","pageSizeOptions"],["matSort","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","status"],["class","mat-header-cell__1",4,"matHeaderCellDef"],["class","mat-cell__1",4,"matCellDef"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","schwierigkeitsgrad"],["matColumnDef","referenztyp"],["class","mat-cell__4",4,"matCellDef"],["matColumnDef","referenz"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"click",4,"matRowDef","matRowDefColumns"],[1,"mat-header-cell__1"],[1,"mat-cell__1"],[4,"ngIf"],["fxLayout","column"],["mat-sort-header",""],["floatLabel","always","appearance","outline",1,"filter","input-wrapper__non-suffix"],["matInput","","type","text",3,"formControl"],["nameFilterInput",""],["mat-button","","matSuffix","","mat-icon-button","","class","mat-form-field-suffix__clear","aria-label","Clear",3,"click",4,"ngIf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"mat-form-field-suffix__clear",3,"click"],["floatLabel","always",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-cell__4"],["referenzFilterInput",""],[3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"h1"),e._uU(1,"R\xe4tselgruppen"),e.qZA(),e.TgZ(2,"div",0)(3,"div",1)(4,"button",2),e.NdJ("click",function(){return a.resetAllFilters()}),e._uU(5,"Filter leeren"),e.qZA()(),e.TgZ(6,"div",1)(7,"button",3),e.NdJ("click",function(){return a.neueRaetselgruppe()}),e._uU(8,"neue Gruppe"),e.qZA()()(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e._UZ(11,"mat-paginator",4),e.TgZ(12,"mat-table",5),e.ynx(13,6),e.YNc(14,gt,1,0,"mat-header-cell",7),e.YNc(15,dt,3,2,"mat-cell",8),e.BQk(),e.ynx(16,9),e.YNc(17,Rt,8,2,"mat-header-cell",10),e.YNc(18,Ct,2,2,"mat-cell",11),e._uU(19,"> "),e.BQk(),e.ynx(20,12),e.YNc(21,vt,7,2,"mat-header-cell",10),e.YNc(22,Tt,2,1,"mat-cell",11),e.BQk(),e.ynx(23,13),e.YNc(24,Et,7,2,"mat-header-cell",10),e.YNc(25,bt,2,1,"mat-cell",14),e.BQk(),e.ynx(26,15),e.YNc(27,St,8,2,"mat-header-cell",10),e.YNc(28,Qt,2,1,"mat-cell",11),e.BQk(),e.YNc(29,At,1,0,"mat-header-row",16),e.YNc(30,Dt,1,0,"mat-row",17),e.qZA()),2&t&&(e.xp6(4),e.Q6J("disabled",a.buttonResetAllFiltersDisabled()),e.xp6(6),e.hij("Suchparameter: ",a.suchparameterStr,""),e.xp6(1),e.Q6J("length",a.anzahlRaetselgruppen)("pageSizeOptions",e.DdM(8,yt)),e.xp6(1),e.Q6J("dataSource",a.dataSource),e.xp6(17),e.Q6J("matHeaderRowDef",a.getDisplayedColumns())("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",a.getDisplayedColumns()))},dependencies:[C.ez,C.sg,C.O5,pe.o9,R.xw,R.SQ,R.Wh,R.yH,g.p0,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,b.ot,b.lW,ve.TU,ve.NW,oe.JX,oe.YE,oe.nU,ye.Ps,ye.Hw,M.c,T.KE,T.R9,M.Nt,T.lN,Pe.LD,Pe.gD,mt.ey,u.u5,u.Fj,u.JJ,u.UX,u.oH],styles:[".mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{border-color:#000;background-color:#f0efef}.mat-form-field-suffix__clear[_ngcontent-%COMP%]{position:absolute!important;right:37px;top:-3px}.input-wrapper__non-suffix[_ngcontent-%COMP%]   .mat-form-field-suffix__clear[_ngcontent-%COMP%]{top:-29px;right:3px}.flexWithSpace[_ngcontent-%COMP%]{justify-content:space-between}.mat-header-cell__1[_ngcontent-%COMP%], .mat-cell__1[_ngcontent-%COMP%]{flex:0 1 5%}.mat-header-cell__2[_ngcontent-%COMP%], .mat-cell__2[_ngcontent-%COMP%]{flex:0 1 30%}.mat-header-cell__3[_ngcontent-%COMP%], .mat-cell__3[_ngcontent-%COMP%], .mat-header-cell__4[_ngcontent-%COMP%], .mat-cell__4[_ngcontent-%COMP%], .mat-header-cell__5[_ngcontent-%COMP%], .mat-cell__5[_ngcontent-%COMP%]{flex:0 1 15%}.filter[_ngcontent-%COMP%]{display:block}@media (max-width: 959px){.mat-header-cell__1[_ngcontent-%COMP%], .mat-cell__1[_ngcontent-%COMP%]{flex:0 1 10%}.mat-header-cell__2[_ngcontent-%COMP%], .mat-cell__2[_ngcontent-%COMP%]{flex:0 1 70%}}"]});var te,Be,$e,je,Ee=l(890),N=l(5412),We=l(4633);class ne{constructor(t,a){this.dialogRef=t,this.data=a,te.add(this)}save(){this.dialogRef.close(this.data)}close(){this.dialogRef.close()}submitDisabled(){return!(0,r.Q_)(this,te,"m",Be).call(this)||!(0,r.Q_)(this,te,"m",$e).call(this)||!(0,r.Q_)(this,te,"m",je).call(this)}}te=new WeakSet,Be=function(){return!!this.data.schluessel&&5===this.data.schluessel.trim().length},$e=function(){return!!this.data.nummer&&this.data.nummer.trim().length>0&&this.data.nummer.trim().length<=100},je=function(){return!(!this.data.punkte||0===this.data.punkte)&&(""+this.data.punkte).endsWith("00")},ne.\u0275fac=function(t){return new(t||ne)(e.Y36(N.so),e.Y36(N.WI))},ne.\u0275cmp=e.Xpm({type:ne,selectors:[["mja-raetselgruppenelement"]],standalone:!0,features:[e.jDz],decls:26,vars:6,consts:[["mat-dialog-title",""],[1,"mat-typography"],["appearance","fill"],["type","text","matInput","",3,"ngModel","disabled","ngModelChange"],["type","text","matInput","",3,"ngModel","ngModelChange"],["type","number","matInput","",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","secondary","cdkFocusInitial","",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"mat-form-field",2)(4,"mat-label"),e._uU(5,"Schl\xfcssel*"),e.qZA(),e.TgZ(6,"input",3),e.NdJ("ngModelChange",function(i){return a.data.schluessel=i}),e.qZA(),e.TgZ(7,"mat-hint"),e._uU(8,"SCHLUESSEL des R\xe4tsels"),e.qZA()(),e.TgZ(9,"mat-form-field",2)(10,"mat-label"),e._uU(11,"Nummer*"),e.qZA(),e.TgZ(12,"input",4),e.NdJ("ngModelChange",function(i){return a.data.nummer=i}),e.qZA(),e.TgZ(13,"mat-hint"),e._uU(14,"dient zur Sortierung und als Titel der Aufgabe"),e.qZA()(),e.TgZ(15,"mat-form-field",2)(16,"mat-label"),e._uU(17,"Punkte*"),e.qZA(),e.TgZ(18,"input",5),e.NdJ("ngModelChange",function(i){return a.data.punkte=i}),e.qZA(),e.TgZ(19,"mat-hint"),e._uU(20,"mit 100 multiplizierte Punktzahl (das vermeidet Rundungsfehler)"),e.qZA()()(),e.TgZ(21,"mat-dialog-actions",6)(22,"button",7),e.NdJ("click",function(){return a.save()}),e._uU(23,"speichern"),e.qZA(),e.TgZ(24,"button",8),e.NdJ("click",function(){return a.close()}),e._uU(25,"doch nicht"),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(a.data.titel),e.xp6(5),e.s9C("disabled",a.data.modusAendern),e.Q6J("ngModel",a.data.schluessel),e.xp6(6),e.Q6J("ngModel",a.data.nummer),e.xp6(6),e.Q6J("ngModel",a.data.punkte),e.xp6(4),e.Q6J("disabled",a.submitDisabled()))},dependencies:[C.ez,b.ot,b.lW,N.Is,N.uh,N.xY,N.H8,M.c,T.KE,T.bx,T.hX,M.Nt,u.u5,u.Fj,u.wV,u.JJ,u.On],styles:["mat-form-field[_ngcontent-%COMP%]{display:block}"]});var be,It=l(5017);class F extends It.o2{constructor(){super(...arguments),be.set(this,(0,e.f3M)(w))}connect(){return(0,r.Q_)(this,be,"f").raetselgruppenelemente$}disconnect(){}}function zt(n,t){1&n&&(e.TgZ(0,"th",14),e._uU(1,"SCHLUESSEL"),e.qZA())}function Mt(n,t){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Oqu(a.raetselSchluessel)}}function Ft(n,t){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Nummer"),e.qZA())}function Lt(n,t){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Oqu(a.nummer)}}function Ot(n,t){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Punkte"),e.qZA())}function qt(n,t){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Oqu(a.punkte)}}function Yt(n,t){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Name"),e.qZA())}function Pt(n,t){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Oqu(a.name)}}function Ht(n,t){1&n&&(e.TgZ(0,"th",14),e._uU(1,"L\xf6sung"),e.qZA())}function Gt(n,t){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.loesungsbuchstabe)}}function Jt(n,t){if(1&n&&(e.TgZ(0,"td",15),e.YNc(1,Gt,2,1,"span",16),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Q6J("ngIf",a.loesungsbuchstabe)}}function Wt(n,t){1&n&&e._UZ(0,"th",14)}function Bt(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"td",15)(1,"button",17),e.NdJ("click",function(){const h=e.CHM(a).$implicit,y=e.oxw();return e.KtG(y.showImagesClicked(h))}),e._uU(2,"PNGs"),e.qZA()()}}function $t(n,t){1&n&&e._UZ(0,"th",14)}function jt(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"td",15)(1,"button",17),e.NdJ("click",function(){const h=e.CHM(a).$implicit,y=e.oxw();return e.KtG(y.editElementClicked(h))}),e._uU(2,"bearbeiten"),e.qZA()()}}function Vt(n,t){1&n&&e._UZ(0,"th",14)}function Kt(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"td",15)(1,"button",18),e.NdJ("click",function(){const h=e.CHM(a).$implicit,y=e.oxw();return e.KtG(y.deleteElementClicked(h))}),e._uU(2,"l\xf6schen"),e.qZA()()}}function Xt(n,t){1&n&&e._UZ(0,"tr",19)}function en(n,t){1&n&&e._UZ(0,"tr",20)}be=new WeakMap,F.\u0275fac=function(){let n;return function(a){return(n||(n=e.n5z(F)))(a||F)}}(),F.\u0275prov=e.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"});let tn=(()=>{class n{constructor(){this.dataSource=(0,e.f3M)(F),this.showImages=new e.vpe,this.editElement=new e.vpe,this.deleteElement=new e.vpe}ngAfterViewInit(){this.table.dataSource=this.dataSource}getDisplayedColumns(){return this.raetselgruppe.schreibgeschuetzt?["schluessel","nummer","punkte","name","loesungsbuchstabe","show"]:["schluessel","nummer","punkte","name","loesungsbuchstabe","show","edit","delete"]}showImagesClicked(a){this.showImages.emit(a)}editElementClicked(a){this.editElement.emit(a)}deleteElementClicked(a){this.deleteElement.emit(a)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["mja-raetselgruppenelemente"]],viewQuery:function(a,s){if(1&a&&e.Gf(g.BZ,5),2&a){let i;e.iGM(i=e.CRH())&&(s.table=i.first)}},inputs:{raetselgruppe:"raetselgruppe"},outputs:{showImages:"showImages",editElement:"editElement",deleteElement:"deleteElement"},standalone:!0,features:[e.jDz],decls:28,vars:2,consts:[[1,"mat-elevation-z8"],["mat-table","","aria-label","Elements",1,"full-width-table"],["matColumnDef","schluessel"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nummer"],["matColumnDef","punkte"],["matColumnDef","name"],["matColumnDef","loesungsbuchstabe"],["matColumnDef","show"],["matColumnDef","edit"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,zt,2,0,"th",3),e.YNc(4,Mt,2,1,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,Ft,2,0,"th",3),e.YNc(7,Lt,2,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,Ot,2,0,"th",3),e.YNc(10,qt,2,1,"td",4),e.BQk(),e.ynx(11,7),e.YNc(12,Yt,2,0,"th",3),e.YNc(13,Pt,2,1,"td",4),e.BQk(),e.ynx(14,8),e.YNc(15,Ht,2,0,"th",3),e.YNc(16,Jt,2,1,"td",4),e.BQk(),e.ynx(17,9),e.YNc(18,Wt,1,0,"th",3),e.YNc(19,Bt,3,0,"td",4),e.BQk(),e.ynx(20,10),e.YNc(21,$t,1,0,"th",3),e.YNc(22,jt,3,0,"td",4),e.BQk(),e.ynx(23,11),e.YNc(24,Vt,1,0,"th",3),e.YNc(25,Kt,3,0,"td",4),e.BQk(),e.YNc(26,Xt,1,0,"tr",12),e.YNc(27,en,1,0,"tr",13),e.qZA()()),2&a&&(e.xp6(26),e.Q6J("matHeaderRowDef",s.getDisplayedColumns()),e.xp6(1),e.Q6J("matRowDefColumns",s.getDisplayedColumns()))},dependencies:[C.ez,C.O5,pe.o9,b.ot,b.lW,g.p0,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk],styles:[".full-width-table[_ngcontent-%COMP%]{width:100%}"]}),n})();var $,we,Re,ae,L,Ce,Se,Ve,Ke,nn=l(7356);function an(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div",5)(1,"button",8),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return e.KtG(i.openNeuesRaetselgruppenelementDialog())}),e._uU(2,"neues Element"),e.qZA()()}if(2&n){const a=e.oxw(2);e.xp6(1),e.Q6J("disabled",!a.getRaetselgruppeID())}}function rn(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div",5)(1,"button",9),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return e.KtG(i.startEdit())}),e._uU(2,"bearbeiten"),e.qZA()()}}function sn(n,t){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"mja-frage-loesung-images",12),e.qZA()),2&n){const a=e.oxw(2);e.xp6(1),e.Q6J("images",a.images)}}function ln(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div",3)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"div",4)(4,"div",5)(5,"mat-label"),e._uU(6,"ID:"),e.qZA()(),e.TgZ(7,"div",6),e._uU(8),e.qZA()(),e.TgZ(9,"div",4)(10,"div",5)(11,"mat-label"),e._uU(12,"Anzahl Elemente:"),e.qZA()(),e.TgZ(13,"div",6),e._uU(14),e.qZA()(),e.TgZ(15,"div",4)(16,"div",5)(17,"mat-label"),e._uU(18,"Kommentar:"),e.qZA()(),e.TgZ(19,"div",6),e._uU(20),e.qZA()(),e.TgZ(21,"div",4)(22,"div",5)(23,"mat-label"),e._uU(24,"ge\xe4ndert durch:"),e.qZA()(),e.TgZ(25,"div",6),e._uU(26),e.qZA()(),e.TgZ(27,"div",4)(28,"div",5)(29,"mat-label"),e._uU(30,"Status:"),e.qZA()(),e.TgZ(31,"div",6),e._uU(32),e.qZA()(),e.TgZ(33,"div",4)(34,"div",5)(35,"mat-label"),e._uU(36,"Referenztyp:"),e.qZA()(),e.TgZ(37,"div",6),e._uU(38),e.qZA()(),e.TgZ(39,"div",4)(40,"div",5)(41,"mat-label"),e._uU(42,"Referenz:"),e.qZA()(),e.TgZ(43,"div",6),e._uU(44),e.qZA()(),e.TgZ(45,"div",4),e.YNc(46,an,3,1,"div",7),e.YNc(47,rn,3,0,"div",7),e.TgZ(48,"div",5)(49,"button",8),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.generiereLaTeX())}),e._uU(50,"LaTeX herunterladen"),e.qZA()(),e.TgZ(51,"div",5)(52,"button",8),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.openPrintVorschauDialog())}),e._uU(53,"Vorschau (PDF)"),e.qZA()(),e.TgZ(54,"div",5)(55,"button",9),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.gotoUebersicht())}),e._uU(56,"zur \xdcbersicht"),e.qZA()()(),e.TgZ(57,"h2"),e._uU(58,"Elemente"),e.qZA(),e.TgZ(59,"mja-raetselgruppenelemente",10),e.NdJ("showImages",function(i){e.CHM(a);const h=e.oxw();return e.KtG(h.onShowImagesElement(i))})("editElement",function(i){e.CHM(a);const h=e.oxw();return e.KtG(h.onEditElement(i))})("deleteElement",function(i){e.CHM(a);const h=e.oxw();return e.KtG(h.onDeleteElement(i))}),e.qZA(),e.TgZ(60,"h2"),e._uU(61),e.qZA(),e.YNc(62,sn,2,1,"div",11),e.qZA()}if(2&n){const a=t.ngIf,s=e.oxw(),i=e.MAs(5);e.xp6(2),e.hij("R\xe4tselgruppe ",a.name,""),e.xp6(6),e.Oqu(a.id),e.xp6(6),e.Oqu(a.elemente.length),e.xp6(6),e.Oqu(a.kommentar),e.xp6(6),e.Oqu(a.geaendertDurch),e.xp6(6),e.Oqu(a.status),e.xp6(6),e.Oqu(a.referenztyp),e.xp6(6),e.Oqu(a.referenz),e.xp6(2),e.Q6J("ngIf",!a.schreibgeschuetzt),e.xp6(1),e.Q6J("ngIf",!a.schreibgeschuetzt),e.xp6(2),e.Q6J("disabled",s.buttonsGenerierenDisabled()),e.xp6(3),e.Q6J("disabled",s.buttonsGenerierenDisabled()),e.xp6(7),e.Q6J("raetselgruppe",a),e.xp6(2),e.AsE("Vorschau ",s.nummer," (",s.schluessel,")"),e.xp6(1),e.Q6J("ngIf",s.images)("ngIfElse",i)}}function pn(n,t){1&n&&(e.TgZ(0,"h2"),e._uU(1,"R\xe4tselgruppe Details"),e.qZA(),e.TgZ(2,"p"),e._uU(3,"keine Gruppe ausgew\xe4hlt"),e.qZA())}function on(n,t){1&n&&(e.TgZ(0,"p"),e._uU(1,"Entweder wurde die Vorschau nicht geladen oder sie existiert nicht"),e.qZA())}class re{constructor(){$.add(this),this.raetselgruppenFacade=(0,e.f3M)(w),this.dialog=(0,e.f3M)(N.uw),this.schluessel="",this.nummer="",this.punkte="",we.set(this,(0,e.f3M)(nn.CI)),Re.set(this,new S.w0),ae.set(this,new S.w0),L.set(this,void 0),Ce.set(this,0)}ngOnInit(){(0,r.YH)(this,Re,this.raetselgruppenFacade.raetselgruppeDetails$.subscribe(t=>{(0,r.YH)(this,L,t,"f"),(0,r.YH)(this,Ce,t.elemente.length,"f")}),"f")}ngOnDestroy(){(0,r.Q_)(this,Re,"f").unsubscribe(),(0,r.Q_)(this,ae,"f").unsubscribe()}getRaetselgruppeID(){return(0,r.Q_)(this,L,"f").id}gotoUebersicht(){this.raetselgruppenFacade.unselectRaetselgruppe()}openPrintVorschauDialog(){if(0===this.getRaetselgruppeID().length)return;const t={titel:"Vorschau generieren",layoutsAntwortvorschlaegeInput:f.fq,selectedLayoutAntwortvorschlaege:void 0};this.dialog.open(Ee.v4,{height:"300px",width:"700px",data:t}).afterClosed().subscribe(s=>{if(s&&t.selectedLayoutAntwortvorschlaege){let i="NOOP";switch(t.selectedLayoutAntwortvorschlaege){case"ANKREUZTABELLE":i="ANKREUZTABELLE";break;case"BUCHSTABEN":i="BUCHSTABEN";break;case"DESCRIPTION":i="DESCRIPTION"}this.raetselgruppenFacade.generiereVorschau(this.getRaetselgruppeID(),i)}})}generiereLaTeX(){this.raetselgruppenFacade.generiereLaTeX(this.getRaetselgruppeID())}startEdit(){this.raetselgruppenFacade.editRaetselgruppe((0,r.Q_)(this,L,"f"))}openNeuesRaetselgruppenelementDialog(){(0,r.Q_)(this,$,"m",Se).call(this,{titel:"Neues Element",id:"neu",modusAendern:!1,nummer:"",schluessel:"",punkte:0})}buttonsGenerierenDisabled(){return 0===this.getRaetselgruppeID().length||0===(0,r.Q_)(this,Ce,"f")}onEditElement(t){const a={titel:"Element \xe4ndern",id:t.id,modusAendern:!0,nummer:t.nummer,schluessel:t.raetselSchluessel,punkte:t.punkte};(0,r.Q_)(this,$,"m",Se).call(this,a)}onDeleteElement(t){(0,r.Q_)(this,L,"f")&&(0,r.Q_)(this,$,"m",Ke).call(this,t)}onShowImagesElement(t){this.schluessel=t.raetselSchluessel,this.nummer=t.nummer,this.punkte=""+t.punkte,(0,r.Q_)(this,ae,"f").unsubscribe(),(0,r.YH)(this,ae,(0,r.Q_)(this,we,"f").loadRaetselPNGs(t.raetselSchluessel).pipe((0,Z.b)(a=>this.images=a)).subscribe(),"f")}}we=new WeakMap,Re=new WeakMap,ae=new WeakMap,L=new WeakMap,Ce=new WeakMap,$=new WeakSet,Se=function(t){this.dialog.open(ne,{height:"400px",width:"500px",data:t}).afterClosed().subscribe(s=>{if(s&&(0,r.Q_)(this,L,"f")){const i=s;(0,r.Q_)(this,$,"m",Ve).call(this,i)}})},Ve=function(t){const a={id:t.id,raetselSchluessel:t.schluessel,nummer:t.nummer,punkte:t.punkte};this.raetselgruppenFacade.saveRaetselgruppenelement(this.getRaetselgruppeID(),a)},Ke=function(t){this.dialog.open(Ee.Tb,{height:"300px",width:"700px",data:{frage:"Soll das R\xe4tselgruppenelement wirklich gel\xf6scht werden?",hinweis:"weg ist weg"}}).afterClosed().subscribe(i=>{!0===i&&this.raetselgruppenFacade.deleteRaetselgruppenelement(this.getRaetselgruppeID(),t)})},re.\u0275fac=function(t){return new(t||re)},re.\u0275cmp=e.Xpm({type:re,selectors:[["mja-raetselgruppen-details"]],standalone:!0,features:[e.jDz],decls:6,vars:4,consts:[["fxLayout","column","fxLayoutGap","20px",4,"ngIf","ngIfElse"],["keineGruppe",""],["imagesFehlen",""],["fxLayout","column","fxLayoutGap","20px"],["flex","","fxLayout","row","fxLayoutGap","10px","fxLayout.lt-sm","column"],["fxLayoutAlign","left center","fxFlex","20"],["fxLayoutAlign","left center","fxFlex","80"],["fxLayoutAlign","left center","fxFlex","20",4,"ngIf"],["fxFlexFill","","mat-raised-button","","color","primary",3,"disabled","click"],["fxFlexFill","","mat-raised-button","","color","primary",3,"click"],[3,"raetselgruppe","showImages","editElement","deleteElement"],[4,"ngIf","ngIfElse"],[3,"images"]],template:function(t,a){if(1&t&&(e.YNc(0,ln,63,17,"div",0),e.ALo(1,"async"),e.YNc(2,pn,4,0,"ng-template",null,1,e.W1O),e.YNc(4,on,2,0,"ng-template",null,2,e.W1O)),2&t){const s=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,a.raetselgruppenFacade.raetselgruppeDetails$))("ngIfElse",s)}},dependencies:[C.ez,C.O5,C.Ov,pe.o9,R.xw,R.SQ,R.Wh,R.s9,R.yH,b.ot,b.lW,N.Is,M.c,T.hX,We.ie,T.lN,Ee.GR,tn]});var se,Qe,Ae,d,xe,Xe,et,tt,un=l(9349);function cn(n,t){if(1&n&&(e.TgZ(0,"div",4)(1,"div",5)(2,"mat-label"),e._uU(3,"ge\xe4ndert durch:"),e.qZA()(),e.TgZ(4,"div",6),e._uU(5),e.qZA()()),2&n){const a=e.oxw().ngIf;e.xp6(5),e.Oqu(a.geaendertDurch)}}function mn(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Name ist Pflicht"),e.qZA())}function gn(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"maximal 100 Zeichen"),e.qZA())}function fn(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"maximal 200 Zeichen "),e.qZA())}function _n(n,t){if(1&n&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(a)}}function dn(n,t){if(1&n&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a,"")}}function hn(n,t){if(1&n&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.Q6J("value",a),e.xp6(1),e.hij("",a," ")}}function Rn(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div",25)(1,"button",28),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return e.KtG(i.cancelEdit())}),e._uU(2,"abbrechen (Details)"),e.qZA()()}}function Cn(n,t){1&n&&(e.TgZ(0,"div",31),e._uU(1," Tja, das kann so noch nicht gespeichert werden. Es gibt noch Validierungsfehler, z.B. fehlende Pflichtangaben und so. "),e.qZA())}function xn(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div")(1,"div",3)(2,"div",4)(3,"div",5)(4,"mat-label"),e._uU(5,"ID:"),e.qZA()(),e.TgZ(6,"div",6),e._uU(7),e.qZA()()(),e.TgZ(8,"div",3),e.YNc(9,cn,6,1,"div",7),e.qZA(),e.TgZ(10,"form",8)(11,"div",9)(12,"div",3)(13,"mat-form-field",10)(14,"mat-label"),e._uU(15,"Name"),e.qZA(),e._UZ(16,"input",11,12),e.TgZ(18,"mat-hint"),e._uU(19,"wird in der Trefferliste angezeigt und in das Quiz \xfcbernommen"),e.qZA(),e.YNc(20,mn,2,0,"mat-error",13),e.YNc(21,gn,2,0,"mat-error",13),e.qZA()(),e.TgZ(22,"div",3)(23,"mat-form-field",10)(24,"mat-label"),e._uU(25,"Kommentar"),e.qZA(),e._UZ(26,"input",14,15),e.YNc(28,fn,2,0,"mat-error",13),e.qZA()(),e.TgZ(29,"div",3)(30,"mat-form-field",10)(31,"mat-label"),e._uU(32,"Status"),e.qZA(),e.TgZ(33,"select",16,17),e.YNc(35,_n,2,2,"option",18),e.qZA()()(),e.TgZ(36,"div",3)(37,"mat-form-field",10)(38,"mat-label"),e._uU(39,"Level"),e.qZA(),e.TgZ(40,"select",19,20),e.YNc(42,dn,2,2,"option",18),e.qZA()()(),e.TgZ(43,"div",3)(44,"mat-form-field",10)(45,"mat-label"),e._uU(46,"Referenztyp"),e.qZA(),e.TgZ(47,"select",21,22),e.YNc(49,hn,2,2,"option",18),e.qZA()()(),e.TgZ(50,"div",3)(51,"mat-form-field",10)(52,"mat-label"),e._uU(53,"Referenz"),e.qZA(),e._UZ(54,"input",23,12),e.TgZ(56,"mat-hint"),e._uU(57,"Referenz auf ID im alten Aufgabenarchiv. Pflicht, wenn Referenztyp gew\xe4hlt"),e.qZA()()()()(),e.TgZ(58,"div",24)(59,"div",25)(60,"button",26),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.submit())}),e._uU(61,"speichern"),e.qZA()(),e.YNc(62,Rn,3,0,"div",27),e.TgZ(63,"div",25)(64,"button",28),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.gotoUebersicht())}),e._uU(65,"abbrechen (\xdcbersicht)"),e.qZA()()(),e.YNc(66,Cn,2,0,"div",29),e.qZA()}if(2&n){const a=t.ngIf,s=e.oxw();e.xp6(7),e.Oqu(a.id),e.xp6(2),e.Q6J("ngIf",a.geaendertDurch),e.xp6(1),e.Q6J("formGroup",s.form),e.xp6(10),e.Q6J("ngIf",s.raetselgruppeDataError("name","required")),e.xp6(1),e.Q6J("ngIf",s.raetselgruppeDataError("name","maxLength")),e.xp6(7),e.Q6J("ngIf",s.raetselgruppeDataError("kommentar","maxLength")),e.xp6(7),e.Q6J("ngForOf",s.selectStatusInput),e.xp6(7),e.Q6J("ngForOf",s.selectSchwierigkeitsgradeInput),e.xp6(7),e.Q6J("ngForOf",s.selectReferenztypenSelectContent),e.xp6(11),e.Q6J("disabled",s.formInvalid()),e.xp6(2),e.Q6J("ngIf",s.showBtnDetails()),e.xp6(4),e.Q6J("ngIf",s.formInvalid())}}function vn(n,t){1&n&&(e.TgZ(0,"h2"),e._uU(1,"R\xe4tselgruppe Basisdaten"),e.qZA(),e.TgZ(2,"p"),e._uU(3,"keine R\xe4tselgruppe ausgew\xe4hlt"),e.qZA())}class ie{constructor(){se.add(this),this.raetselgruppenFacade=(0,e.f3M)(w),this.selectStatusInput=["ERFASST","FREIGEGEBEN"],this.selectSchwierigkeitsgradeInput=(new f.W9).getLabelsSorted(),this.selectReferenztypenSelectContent=(new f.s$).getLabelsSorted(),Qe.set(this,(0,e.f3M)(u.qu)),Ae.set(this,(0,e.f3M)(Ue.F0)),d.set(this,void 0),xe.set(this,new S.w0),this.raetselgruppeDataError=(t,a)=>this.form.controls[t].hasError(a),(0,r.Q_)(this,se,"m",Xe).call(this)}ngOnInit(){(0,r.YH)(this,xe,this.raetselgruppenFacade.raetselgruppeBasisdaten$.subscribe(t=>{(0,r.YH)(this,d,t,"f"),(0,r.Q_)(this,se,"m",et).call(this)}),"f")}ngOnDestroy(){(0,r.Q_)(this,xe,"f").unsubscribe()}submit(){const t=(0,r.Q_)(this,se,"m",tt).call(this);this.raetselgruppenFacade.saveRaetselgruppe(t)}showBtnDetails(){return"neu"!==(0,r.Q_)(this,d,"f").id}cancelEdit(){this.raetselgruppenFacade.cancelEdit((0,r.Q_)(this,d,"f"))}gotoUebersicht(){this.raetselgruppenFacade.unselectRaetselgruppe(),(0,r.Q_)(this,Ae,"f").navigateByUrl("raetselgruppen/uebersicht")}formInvalid(){const s=this.form.controls.referenz.value;return""===this.form.controls.schwierigkeitsgrad.value||!(""===this.form.controls.referenztyp.value||s&&0!==s.trim().length)||!this.form.valid}}Qe=new WeakMap,Ae=new WeakMap,d=new WeakMap,xe=new WeakMap,se=new WeakSet,Xe=function(){this.form=(0,r.Q_)(this,Qe,"f").group({name:["",[u.kI.required,u.kI.maxLength(100)]],status:["ERFASST",[u.kI.required]],kommentar:[""],schwierigkeitsgrad:[f.$h.label,[u.kI.required]],referenztyp:[f.cw.label],referenz:[""]})},et=function(){this.form.controls.name.setValue((0,r.Q_)(this,d,"f").name?(0,r.Q_)(this,d,"f").name:""),this.form.controls.status.setValue((0,r.Q_)(this,d,"f").status),this.form.controls.kommentar.setValue((0,r.Q_)(this,d,"f").kommentar?(0,r.Q_)(this,d,"f").kommentar:"");const t=(0,r.Q_)(this,d,"f")&&(0,r.Q_)(this,d,"f").schwierigkeitsgrad?(new f.W9).getGuiSchwierigkeitsgrade((0,r.Q_)(this,d,"f").schwierigkeitsgrad):f.$h;this.form.controls.schwierigkeitsgrad.setValue(t.label);let a=f.cw;(0,r.Q_)(this,d,"f")&&(0,r.Q_)(this,d,"f").referenztyp&&(a=(new f.s$).getGuiRefereztyp((0,r.Q_)(this,d,"f").referenztyp)),this.form.controls.referenztyp.setValue(a.label),this.form.controls.referenz.setValue((0,r.Q_)(this,d,"f").referenz?(0,r.Q_)(this,d,"f").referenz:"")},tt=function(){const t=this.form.value,a=(new f.s$).getReferenztypOfLabel(t.referenztyp),s=(new f.W9).getSchwierigkeitsgradOfLabel(t.schwierigkeitsgrad);return{id:(0,r.Q_)(this,d,"f").id,name:t.name.trim(),referenz:t.referenz&&t.referenz.trim().length>0?t.referenz.trim():void 0,referenztyp:"NOOP"===a?void 0:a,schwierigkeitsgrad:s,status:t.status,kommentar:t.kommentar&&t.kommentar.trim().length>0?t.kommentar.trim():void 0}},ie.\u0275fac=function(t){return new(t||ie)},ie.\u0275cmp=e.Xpm({type:ie,selectors:[["mja-raetselgruppe-edit"]],standalone:!0,features:[e.jDz],decls:7,vars:4,consts:[["fxLayout","column"],[4,"ngIf","ngIfElse"],["keineRaetselgruppe",""],[1,"mb-2"],["flex","","fxLayout","row","fxLayoutGap","20px","fxLayout.lt-sm","column"],["fxLayoutAlign","left center","fxFlex","10"],["fxLayoutAlign","left center","fxFlex","90"],["flex","","fxLayout","row","fxLayoutGap","20px","fxLayout.lt-sm","column",4,"ngIf"],["novalidate","",3,"formGroup"],["fxLayout","column wrap","fxLayoutGap","10px","fxLayoutAlign","flex-start"],["appearance","fill",1,"form-box"],["matInput","","maxlength","100","placeholder","name","formControlName","name"],["nameInput",""],[4,"ngIf"],["matInput","","maxlength","200","placeholder","Kommentar","formControlName","kommentar"],["kommentarInput",""],["matNativeControl","","formControlName","status"],["statusInput",""],[3,"value",4,"ngFor","ngForOf"],["matNativeControl","","formControlName","schwierigkeitsgrad"],["schwierigkeitsgradInput",""],["matNativeControl","","formControlName","referenztyp"],["referenztypInput",""],["matInput","","maxlength","36","placeholder","Referenz","formControlName","referenz"],["flex","","fxLayout","row","fxLayoutGap","10px","fxLayout.lt-sm","column"],["fxLayoutAlign","left center","fxFlex","20"],["fxFlexFill","","mat-raised-button","","color","primary",3,"disabled","click"],["fxLayoutAlign","left center","fxFlex","20",4,"ngIf"],["fxFlexFill","","mat-raised-button","","color","primary",3,"click"],["class","hint-red mt-1 mb-2",4,"ngIf"],[3,"value"],[1,"hint-red","mt-1","mb-2"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"R\xe4tselgruppeneditor"),e.qZA(),e.YNc(3,xn,67,12,"div",1),e.ALo(4,"async"),e.YNc(5,vn,4,0,"ng-template",null,2,e.W1O),e.qZA()),2&t){const s=e.MAs(6);e.xp6(3),e.Q6J("ngIf",e.lcZ(4,2,a.raetselgruppenFacade.editorContent$))("ngIfElse",s)}},dependencies:[C.ez,C.sg,C.O5,C.Ov,pe.o9,R.xw,R.SQ,R.Wh,R.s9,R.yH,b.ot,b.lW,M.c,T.TO,T.KE,T.bx,T.hX,M.Nt,T.lN,We.ie,u.u5,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.nD,un.Ky,u.UX,u.sg,u.u],styles:["mat-form-field[_ngcontent-%COMP%]{display:block}.mat-form-field__1[_ngcontent-%COMP%]{flex:0 1 5%}.mat-form-field__2[_ngcontent-%COMP%]{flex:0 1 95%}"]});const Tn=[{path:"uebersicht",canActivate:[()=>(0,e.f3M)(le.jE).userIsAdmin$],component:B,providers:[Le]},{path:"details",canActivate:[()=>(0,e.f3M)(le.jE).userIsAdmin$],component:re},{path:"edit",canActivate:[()=>(0,e.f3M)(le.jE).userIsAdmin$],component:ie},{path:"",pathMatch:"full",canActivate:[()=>(0,e.f3M)(le.jE).userIsAdmin$],component:B,providers:[Le]}]}}]);