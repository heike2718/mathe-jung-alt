<h1>RÃ¤tselgruppen</h1>

<mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" matSort matSortActive="name"
  matSortDirection="asc" matSortDisableClear (matSortChange)="announceSortChange($event)">

  <!-- status -->
  <ng-container matColumnDef="status">
    <mat-header-cell *matHeaderCellDef class="mat-header-cell__1"> </mat-header-cell>
    <mat-cell *matCellDef="let gruppe" class="mat-cell__1"> <span *ngIf="gruppe.status === 'ERFASST'">
        <mat-icon>block</mat-icon>
      </span>
      <span *ngIf="gruppe.status === 'FREIGEGEBEN'">
        <mat-icon>check_circle_outline</mat-icon>
      </span>
    </mat-cell>
  </ng-container>

  <!-- name -->
  <ng-container matColumnDef="name">
    <mat-header-cell *matHeaderCellDef>
      <div fxLayout="column">
        <label mat-sort-header>
          Name
        </label>
        <mat-form-field class="filter input-wrapper__non-suffix" floatLabel="always" appearance="outline">
          <input matInput [formControl]="nameFilterControl" type="text" #nameFilterInput />
          <button mat-button *ngIf="nameFilterInput.value" matSuffix mat-icon-button
            class="mat-form-field-suffix__clear" aria-label="Clear" (click)="clearFilter(nameFilterControl)">
            <mat-icon>
              close
            </mat-icon>
          </button>
        </mat-form-field>
      </div>
    </mat-header-cell>
    <mat-cell *matCellDef="let gruppe">
      {{gruppe.name}} ({{gruppe.anzahlElemente}})
    </mat-cell>>
  </ng-container>

  <!-- schwierigkeitsgrad -->
  <ng-container matColumnDef="schwierigkeitsgrad">
    <mat-header-cell *matHeaderCellDef>
      <div fxLayout="column">
        <label mat-sort-header>
          Level
        </label>
        <mat-form-field class="filter input-wrapper__non-suffix" floatLabel="always" appearance="outline">
          <mat-select floatLabel="always" [formControl]="schwierigkeitsgradSelectFilterControl">
            <mat-option [value]=""></mat-option>
            <mat-option *ngFor="let level of schwierigkeitsgrade" [value]="level">
              {{ level }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </mat-header-cell>
    <mat-cell *matCellDef="let gruppe"> {{gruppe.schwierigkeitsgrad}} </mat-cell>
  </ng-container>

  <!-- referenztyp -->
  <ng-container matColumnDef="referenztyp">
    <mat-header-cell *matHeaderCellDef>
      <div fxLayout="column">
        <label mat-sort-header>
          Referenztyp
        </label>
        <mat-form-field class="filter input-wrapper__non-suffix" floatLabel="always" appearance="outline">
          <mat-select floatLabel="always" [formControl]="referenztypSelectFilterControl">
            <mat-option [value]=""></mat-option>
            <mat-option *ngFor="let reftyp of referenztypen" [value]="reftyp">
              {{ reftyp }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </mat-header-cell>
    <mat-cell *matCellDef="let gruppe" class="mat-cell__4"> {{gruppe.referenztyp}} </mat-cell>
  </ng-container>

  <!-- referenz -->
  <ng-container matColumnDef="referenz">
    <mat-header-cell *matHeaderCellDef>
      <div fxLayout="column">
        <label mat-sort-header>
          Referenz
        </label>
        <mat-form-field class="filter input-wrapper__non-suffix" floatLabel="always" appearance="outline">
          <input matInput [formControl]="referenzFilterControl" type="text" #referenzFilterInput />
          <button mat-button *ngIf="referenzFilterInput.value" matSuffix mat-icon-button
            class="mat-form-field-suffix__clear" aria-label="Clear" (click)="clearFilter(referenzFilterControl)">
            <mat-icon>
              close
            </mat-icon>
          </button>
        </mat-form-field>
      </div>
    </mat-header-cell>
    <mat-cell *matCellDef="let gruppe"> {{gruppe.referenz}} </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="getDisplayedColumns(); sticky: true"></mat-header-row>
  <mat-row *matRowDef="let row; columns: getDisplayedColumns()" (click)="onRowClicked(row)"></mat-row>

</mat-table>
<mat-paginator [length]="anzahlRaetselgruppen" [pageSizeOptions]="[20,30,50]" showFirstLastButtons>
</mat-paginator>