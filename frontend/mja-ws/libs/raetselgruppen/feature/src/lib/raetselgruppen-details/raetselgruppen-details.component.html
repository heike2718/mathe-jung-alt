<div class="mja-container">

    <div *ngIf="raetselgruppenFacade.aufgabensammlungDetails$ | async as gruppe else keineGruppe">

        <h2>Rätselgruppe {{gruppe.name}} <span matBadge={{gruppe.elemente.length}} matBadgeColor="accent"
                class="ml-1"></span></h2>

        <div class="grid-container-2 mt-2 mb-2">
            <label>ID:</label>
            <div>
                {{gruppe.id}}
            </div>
            <label>Kommentar:</label>
            <div>
                {{gruppe.kommentar}}
            </div>
            <label>geändert durch:</label>
            <div>
                {{gruppe.geaendertDurch}}
            </div>
            <label>freigegeben:</label>
            <div>
                {{gruppe.freigegeben}}
            </div>
            <label>privat:</label>
            <div>
                {{gruppe.privat}}
            </div>
            <label> Referenztyp:</label>
            <div>
                {{gruppe.referenztyp}}
            </div>
            <label>Referenz:</label>
            <div>
                {{gruppe.referenz}}
            </div>
        </div>

        <div class="button-container">

            <div *ngIf="!(gruppe.schreibgeschuetzt)">
                <button mat-raised-button color="primary" [disabled]="!getRaetselgruppeID()"
                    (click)="openNeuesAufgabensammlungselementDialog()">neues Element</button>
            </div>

            <div *ngIf="!(gruppe.schreibgeschuetzt)">
                <button mat-raised-button color="primary" (click)="startEdit()">bearbeiten</button>
            </div>

            <div>
                <button mat-raised-button color="primary" [disabled]="buttonsGenerierenDisabled()"
                    (click)="openGenerateDialog()">PDF / LaTeX</button>
            </div>

            <div>
                <button mat-raised-button color="primary" (click)="reload()">aktualisieren</button>
            </div>

            <div>
                <button mat-raised-button color="primary" (click)="gotoUebersicht()">zur Übersicht</button>
            </div>


        </div>

        <h2>Elemente</h2>

        <mja-Aufgabensammlungselemente [raetselgruppe]="gruppe" (showImages)="onShowImagesElement($event)"
            (editElement)="onEditElement($event)" (deleteElement)="onDeleteElement($event)">
        </mja-Aufgabensammlungselemente>

        <div *ngIf="gruppe.elemente.length > 0">
            <h2>Vorschau {{nummer}} ({{schluessel}})</h2>
            <div *ngIf="schluessel.length > 0" class="mb-2">
                <button mat-raised-button color="primary" (click)="gotoRaetselDetails()">{{schluessel}}</button>
                <button *ngIf="raetselgruppenFacade.selectedAufgabensammlungselement$ | async as element" mat-raised-button
                    color="primary" class="ml-2" (click)="onShowImagesElement(element)">neu laden</button>
            </div>            
            <div *ngIf="images else imagesFehlen">
                <mja-frage-loesung-images [images]="images"></mja-frage-loesung-images>
            </div>
        </div>
    </div>

    <ng-template #keineGruppe>
        <h2>Rätselgruppe Details</h2>
        <p>keine Gruppe ausgewählt</p>
    </ng-template>

    <ng-template #imagesFehlen>
        <p>Entweder wurde die Vorschau nicht geladen oder sie existiert nicht</p>
    </ng-template>